<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:effects="qs.charts.effects.*" close="removeWin();" 
	xmlns:mc="component.*" xmlns:util="util.*"  width="30%" height="30%" showCloseButton="true" title="终端高级查询"
	 creationComplete="init()">
	 
	<mx:RemoteObject id="termService" destination="termService" showBusyCursor="true">
		<mx:method name="getTermTypes" result="termTypesInit(event)"/>
	</mx:RemoteObject>
	
	<mx:Script>
		<![CDATA[
			import mx.managers.PopUpManager;
			import mx.rpc.events.*;
			import mx.collections.ArrayCollection;
			import dto.security.client.TermType;
			
			private var termActive:int=-1;
			
			private function removeWin():void{
				PopUpManager.removePopUp(this);
			}
			
			public var fatherFunction:Function;
			
			private function search():void{
				if(yes.selected)
				{
					termActive=1;
				}
				else if(no.selected)
				{
					termActive=0;
				}
				fatherFunction(clientName.text,clientIp.text,clientPosition.text,ClientTypeCB.selectedItem.data,termActive);//,clientScal.text,clientResolution.text
				removeWin();
			}
			private function init():void
			{
				termService.getTermTypes();
			}
			
			private function termTypesInit(event:ResultEvent):void
			{
				var tempClientTypes:ArrayCollection = event.result as ArrayCollection;
				var tempData:Object = null;
				var clientTypes:ArrayCollection = new ArrayCollection();
				
				tempData = new Object();
	 			tempData.label = "请选择";
	 			tempData.data = -2;		//不作为查询条件
	 			clientTypes.addItem(tempData);

	 			for(var i:int;i<tempClientTypes.length;i++)
	 			{
	 				tempData = new Object();
	 				var aClientType:TermType = tempClientTypes.getItemAt(i) as TermType;
	 				tempData.label = aClientType.typeName;
	 				tempData.data = aClientType.typeId;
	 				clientTypes.addItem(tempData);
	 			}
	 			
	 			tempData = new Object();
	 			tempData.label = "其他类型";
	 			tempData.data = -1;		//其他类型
	 			clientTypes.addItem(tempData);
	 			
	 			ClientTypeCB.dataProvider=clientTypes;
			}
		]]>
	</mx:Script>
	<mx:HBox height="100%" width="100%">
			<mx:Form  height="100%" width="50%">
				<mx:FormItem width="100%" label="设备名称：" direction="horizontal">
					<mx:TextInput id="clientName" maxChars="42" width="150"/>								 
				</mx:FormItem>
				<mx:FormItem width="100%" label="设备IP：">
					<mx:TextInput id="clientIp" maxChars="42" width="150"/>								 
				</mx:FormItem>
				<mx:FormItem width="100%" label="设备所在位置：">
					<mx:TextInput id="clientPosition" maxChars="42" width="150"/>								 
				</mx:FormItem>
				<!--<mx:FormItem width="100%" label="画面输出比例：">
					<mx:TextInput id="clientScal" maxChars="42" width="150"/>								 
				</mx:FormItem>
				<mx:FormItem width="100%" label="画面分辨率：">
					<mx:TextInput id="clientResolution" maxChars="42" width="150"/>								 
				</mx:FormItem>-->
				<mx:FormItem width="100%" label="终端类型：">
					<mx:ComboBox id="ClientTypeCB" width="150"/>						 
				</mx:FormItem>
				<mx:FormItem width="100%" label="是否激活：" direction="horizontal">
					<mx:RadioButton groupName="actgroup" id="yes" label="是"/>
        			<mx:RadioButton groupName="actgroup" id="no" label="否"/>
				</mx:FormItem>
				<mx:ControlBar width="100%" horizontalAlign="center">
					<mx:Button label="查询" click="search();"/>	
					<mx:Button label="取消" click="removeWin();"/>				 
				</mx:ControlBar>
			</mx:Form>
		
		</mx:HBox>
</mx:TitleWindow>

<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow title="视频分类管理" xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:util="util.cpt.*" layout="absolute" xmlns:mc="pop.video.*" 
	x="190" y="290" width="840" height="388" showCloseButton="true"  creationComplete="initApp()" close="this.closeThis()">
	<mx:Script source="as/videoTypePrep.as"/>
	
	<mx:RemoteObject id="videoTypeService" destination="videoTypeService" showBusyCursor="true">
		<mx:method name="getTreeVideoType" result="getTreeVideoTypeHandler(event)"/>
		<mx:method name="removeVideoType" result="removeVideoTypeHandler(event)" fault="getExecptionHander(event)"/>
		<mx:method name="updateVideoType" result="updateVideoTypeHandler(event)"/>
		<mx:method name="updateVideoNum" result="updateVideoNumHandler(event)"/>
	</mx:RemoteObject>

	<mx:DateFormatter id="dateFormatter" formatString="YYYY-MM-DD JJ:NN"/>

	<mx:StringValidator
		source="{typeName}" property="text"
		required="true" requiredFieldError="请输入分类名称"  		  
		trigger="{cmdOk}" triggerEvent="click"
		valid="updateVideoType()" invalid="Alert.show('请输入分类名称')"/>

<mx:HDividedBox width="100%" height="100%">
	<mx:Box width="35%" height="100%">
		<mx:Tree id="type_tree" dataProvider="{videoTypeTree}" labelField="@label" width="100%" height="90%" change="treeChanged(event)"/>
		<mx:ControlBar width="100%" height="10%">
			<mx:Spacer width="100%"/>
			<mx:Button id="addBtn" label="添加" click="showNewTemplateWindow()"/>
			<mx:Button id="delBtn" label="删除" click="removeVideoType()"/>
		</mx:ControlBar>
	</mx:Box>
	<mx:VBox width="65%" height="100%" horizontalAlign="center" verticalAlign="middle">
		<mx:Form width="60%">
			<mx:FormHeading label="分类信息"/>
			<mx:FormItem label="分类名称:" required="true">
				<mx:TextInput id="typeName" text="{labelTmp}" maxChars="32"/>
			</mx:FormItem>
			<mx:FormItem label="所属分类:" width="100%">
				<mc:VideoTypeCB id="txtTypeId" dataProvider="{videoTypeTree}" labelFunction="getLabelFunction"/>
			</mx:FormItem>
			<mx:FormItem label="视频数量:">
				<mx:Text text="{selectedType.@num}"/>
			</mx:FormItem>
			<mx:FormItem label="创建时间:">
				<mx:Text text="{dateTmp}"/>
			</mx:FormItem>
		</mx:Form>
		<mx:ControlBar width="100%" horizontalAlign="center">
			<mx:Button id="cmdOk" label="更新"/>
		</mx:ControlBar>
	</mx:VBox>
</mx:HDividedBox>
</mx:TitleWindow>